<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>HtoA: Properties and parameters</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><img alt="Logo" src="solidangle_small.png"/></td>
  <td style="padding-left: 1em;">
   <div id="projectname">Arnold for Houdini Developer Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">HtoA Developer Guide</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Properties and parameters </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Getting Houdini parameters is achieved by wrapping <a href="http://www.sidefx.com/docs/hdk11.1/hdk_soho.html">SOHO</a> methods and <a href="http://www.sidefx.com/docs/houdini11.1/hom">HOM</a> methods.</p>
<p>All this is implemented as methods of the HaObject class. We will detail the differences between each set of methods and which set of methods you should use in different contexts.</p>
<p>Setting Arnold parameters is the heart of the translator; we have adopted a pull mechanism where Arnold nodes, wrapped as subclasses of htoa.node.node.HaNode, query as many parameters they can get from a target htoa.object.object.HaObject.</p>
<h1>Prefix </h1>
<p>In order to minimize the chance of name collisions with Houdini or third-party parameters, all Arnold or HtoA-specific parameters have been prefixed with <b><code>"ar_"</code></b>. This prefix is defined as htoa.node.node.HA_PARM_PREFIX constant.</p>
<h1>Getting SOHO object parameters </h1>
<p>Most of the time, you should use the SOHO methods of HaObject to get Houdini objects properties. Using SOHO is not only faster, but retrieved parameter values benefit from <a href="http://www.sidefx.com/docs/houdini11.1/props/#Inheritance">SOHO property inheritance</a>.</p>
<p>SOHO imposes to specify the expected type of the parameter and thus the methods are prefixed with a single letter indicating this type: 'f' for float, 'i' for integer (or bool) and 's' for string.</p>
<p>There are two sets of SOHO methods, the first one to retrieve a single value:</p>
<ul>
<li>htoa.object.object.HaObject.fprop()</li>
<li>htoa.object.object.HaObject.iprop()</li>
<li>htoa.object.object.HaObject.sprop()</li>
</ul>
<p>The second set to retrieve a list of samples:</p>
<ul>
<li>htoa.object.object.HaObject.fsamples()</li>
<li>htoa.object.object.HaObject.isamples()</li>
<li>htoa.object.object.HaObject.ssamples()</li>
</ul>
<p>The only mandatory argument for these methods is the SOHO token, most of the time the parameter name. You can optionally specify an evaluation time (or a list of evaluation times for the xsamples() methods) and a default value. So getting the shutter time in an HaCamera instance is as easy as:</p>
<div class="fragment"><div class="line">shutter = <span class="keyword">self</span>.fprop(<span class="stringliteral">&#39;shutter&#39;</span>)</div>
</div><!-- fragment --><h1>Getting SOHO global parameters </h1>
<p>Similar convenience methods are available to query global SOHO tokens. They are implemented as static methods of htoa.session.HaSession:</p>
<ul>
<li>htoa.session.HaSession.fprop()</li>
<li>htoa.session.HaSession.iprop()</li>
<li>htoa.session.HaSession.sprop()</li>
</ul>
<h1>Getting hou parameters </h1>
<p>Accessing Houdini parameters through the standard Houdini hou module is sometimes necessary when the object you need to query is not available through SOHO, such as shaders. A simple wrapper for <a href="http://www.sidefx.com/docs/houdini11.1/hom/hou/Parm">hou.Parm</a> is provided:</p>
<ul>
<li>htoa.object.object.HaObject.parm()</li>
</ul>
<h1>Setting Arnold parameters </h1>
<p>To set an Arnold node's parameters, first use the HaNode wrapper or subclass it, then <em>pull</em> the parameters from a target HaObject. This is achieved with the following methods:</p>
<ul>
<li>htoa.node.node.HaNode.pullSohoParms()</li>
<li>htoa.node.node.HaNode.pullHouParms()</li>
</ul>
<p>These methods will do the bulk of the parameter passing but sometimes it is necessary to ignore some of the Arnold node parameters because they require a specific processing, are irrelevant or are not yet implemented. Such parameters should be added to a parameter blacklist (htoa.node.node.HaNode._blacklist) that can be overriden by subclasses.</p>
<p>All parameters successfully passed or blacklisted are logged at the trace level (see <a class="el" href="logging.html">Logging</a>). Any other parameter not passed is logged as an error. This gives you a way to ensure you don't miss any parameters unintentionally. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<br>
<address class="footer"><small>
HtoA 1.5.3 - &copy; 2014 <a href="http://www.solidangle.com">Solid Angle</a>
</small></address>
</body>
</html>
