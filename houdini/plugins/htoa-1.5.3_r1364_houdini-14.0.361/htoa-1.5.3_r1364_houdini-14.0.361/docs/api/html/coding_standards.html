<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>HtoA: Coding standards</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><img alt="Logo" src="solidangle_small.png"/></td>
  <td style="padding-left: 1em;">
   <div id="projectname">Arnold for Houdini Developer Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">HtoA Developer Guide</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Coding standards </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>As in any non-trivial software project, it's very important that certain coding rules and guidelines are observed.</p>
<p>Without these rules, the code added by different developers, each with a different background and personal preferences, would quickly grow without recognizable structure, and programmers would be forced to learn and identify a multitude of styles and syntactical patterns. It's much better to agree on a common set of rules so that everybody can "speak the same language". This is known as the <a href="http://en.wikipedia.org/wiki/Programming_style">coding style</a>.</p>
<p>Consistency of style helps everyone in the team understand each other's code better and makes maintenance easier. Our rules for HtoA development are described below.</p>
<h1>General rules and editing </h1>
<ul>
<li>Some advanced language features, such as complex templates and multiple inheritance, can lead to non-obvious code that is difficult for others to understand. Avoid these features, unless they produce an arguably cleaner overall design that is still easy to understand. When in doubt, opt for longer and clear code over shorter and obfuscated code. By writing code that can be clearly understood and maintained even by new, junior members in the team, you will maximize the code's business value.</li>
<li>Indent with four (4) real spaces: no tabs</li>
<li>Try to keep line lengths under 80 columns unless it is detrimental to the legibility of the code, for example when a line is exceeding the limit by just a few characters.</li>
<li>English is the official language to use in the code and comments. Also please use the US spelling and not the UK one (ie. <em>colorize</em>, not <em>colourise</em>).</li>
<li>Use only ASCII (Latin-1, ISO-8859-1) characters anywhere in the code, comments or file names, this means no accents and special characters.</li>
<li>For Python, generally follow the <a href="http://www.python.org/dev/peps/pep-0008/">PEP-8 guidelines</a>.</li>
<li>For C++, use the <a href="http://en.wikipedia.org/wiki/Indent_style">Allman indent style</a>, where each opening or closing brace has its own line:</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (a == b)</div>
<div class="line">{</div>
<div class="line">   doSomething();</div>
<div class="line">   doMoreThings(a, b);</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">   doSomethingElse();</div>
<div class="line">}</div>
<div class="line">finalThing();</div>
</div><!-- fragment --><ul>
<li>In cases where the block of code has a single line, it's OK to avoid braces altogether:</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> (i = 0; i &lt; count; ++i)</div>
<div class="line">   sum += i;</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (ret != Status::OK)</div>
<div class="line">   <span class="keywordflow">return</span> Status::FAIL;</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">   <span class="keywordflow">return</span> Status::OK;</div>
</div><!-- fragment --><ul>
<li>There is no space between the name of a method or function and its parenthesis, neither between the parenthesis and the arguments:</li>
</ul>
<div class="fragment"><div class="line">myFunction(a, b);    <span class="comment">// OK</span></div>
<div class="line">myFunction (a, b);   <span class="comment">// wrong</span></div>
<div class="line">myFunction( a, b );  <span class="comment">// wrong</span></div>
</div><!-- fragment --><ul>
<li>End source files with an empty line.</li>
<li>Header files should be included <a href="http://www.topology.org/linux/include.html">from local to global</a>. First local files, then other headers in the same project, then headers from external libraries, and finally system headers. If any of those groups has several files, use alphabetical order.</li>
<li>Use C++ notation for include files:</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cstring&gt;</span>   <span class="comment">// OK</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span>  <span class="comment">// wrong</span></div>
</div><!-- fragment --><h1>Comments </h1>
<ul>
<li>Use C++ comments (<code>//</code>), not C comments (<code>/* ... \*\/</code>). There must be a space following the <code>//</code>. For example:</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// I am a nice comment</span></div>
<div class="line"><span class="comment">//But I suck</span></div>
</div><!-- fragment --><ul>
<li>C comment are OK in certain cases:</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">virtual</span> <span class="keywordtype">void</span> peel(<span class="keywordtype">float</span> <span class="comment">/* fruit */</span>) {}</div>
</div><!-- fragment --><ul>
<li>The code should documented, see the dedicated <a class="el" href="documenting.html">Documenting the code</a> page.</li>
</ul>
<h1><a class="anchor" id="naming_conventions"></a>
Naming conventions</h1>
<ul>
<li>File names are lowercase with underscores and only use alphanumeric characters. For example, the name of the file that contains the implementation of the <code>RenderInstance</code> class should be:</li>
</ul>
<div class="fragment"><div class="line">render_instance.cpp  <span class="comment">// OK</span></div>
<div class="line">RenderInstance.cpp   <span class="comment">// wrong</span></div>
<div class="line">renderInstance.cpp   <span class="comment">// wrong</span></div>
<div class="line">Render_Instance.cpp  <span class="comment">// wrong (mixing two different styles is specially bad)</span></div>
</div><!-- fragment --><ul>
<li>Macros and enums are all upper case:</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#define UPDATE_UNDEFINED   0</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define UPDATE_CAMERA      1</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keyword">enum</span> PartitionType</div>
<div class="line">{</div>
<div class="line">    POINTS = 0,</div>
<div class="line">    PRIMITIVES,</div>
<div class="line">    DETAIL</div>
<div class="line">};</div>
</div><!-- fragment --><ul>
<li>Variable names use underscores:</li>
</ul>
<div class="fragment"><div class="line">Property arnold_options;   <span class="comment">// OK</span></div>
<div class="line">Property arnoldOptions;    <span class="comment">// wrong</span></div>
<div class="line">Property ArnoldOptions;    <span class="comment">// wrong</span></div>
</div><!-- fragment --><p>Do <em>not</em> use hungarian notation for variables, like <code>unsigned long ulCount</code>.</p>
<ul>
<li>Classes, types, enums use UpperCamelCase:</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">class </span>ArnoldNode;</div>
<div class="line"><span class="keyword">typedef</span> <span class="keywordtype">float</span> MyFloat;</div>
<div class="line"><span class="keyword">enum</span> PartitionType { POINTS, PRIMITIVES, DETAIL };</div>
</div><!-- fragment --><ul>
<li>Functions and methods use lowerCamelCase</li>
</ul>
<div class="fragment"><div class="line">Status arnoldRenderInit();      <span class="comment">// OK</span></div>
<div class="line">Status ArnoldRenderInit(<span class="keywordtype">void</span>);  <span class="comment">// wrong</span></div>
<div class="line">Status ArnoldRender_Init();     <span class="comment">// wrong</span></div>
<div class="line">Status ArnoldRenderInit(<span class="keywordtype">void</span>);  <span class="comment">// wrong</span></div>
</div><!-- fragment --><ul>
<li>Protected and private member variables are prefixed with "_":</li>
</ul>
<div class="fragment"><div class="line">String _render_type;</div>
</div><!-- fragment --><ul>
<li>Global variables are prefixed with "g_"</li>
</ul>
<div class="fragment"><div class="line">RendererContext g_render_context;</div>
</div><!-- fragment --><ul>
<li>We use #pragma once (instead of include guards) for headers</li>
</ul>
<p>For anything else not in these rules, use common sense, but keep it consistent. If you are modifying an existing function or method, respect its original coding style. The same applies to adding code to an existing file: <em>respect the coding style around you</em>.</p>
<h1>Eclipse code style preset </h1>
<p>For those who use <a href="https://www.eclipse.org">Eclipse</a>, we provide a code style configuration file in <code>contrib/eclipse/code_style.xml</code>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<br>
<address class="footer"><small>
HtoA 1.5.3 - &copy; 2014 <a href="http://www.solidangle.com">Solid Angle</a>
</small></address>
</body>
</html>
