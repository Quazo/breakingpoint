// $Id: RenderViewer 885 2014-08-05 15:49:40Z kik $

// When rendering for the render viewer, it may be desireable to override some
// parameter values.  For example, since the user is asking for a quick preview
// render, it may be desireable to change to render to an interactive device.
// 
// The render state provides several parameters which can be used to evaluate
// values from the viewport settings. These are:
// 
//  $cropl, $cropr
//  $cropb, $cropt - The left, right, bottom and top corners of the crop region.
//  $socket        - The Houdini socket device listening for tile data
// 
// These overrides are applied to the CAMERA object given in the
// initialization of SOHO.
// 
// FILE STRUCTURE:
// Please see ViewportRender for details.
// 
// NOTES:
// This file is used to provide overrides when rendering from the render viewer
// in Houdini. The render viewer expects the image to be written to the socket
// specified by $socket. It may be necessary to modify the soho programs for
// the render generation to handle this properly.

#include "$HH/soho/overrides/RenderViewer"

// Viewport overrides for Arnold
{
    override.inherit    CommonView
    override.name       Arnold

    // Force the render to go to the "ip" device
    ar_picture          [ "iprsocket:$socket" ]
                          
    // set this flag to signal the override to htoa
    ar_overridden       [ 1 ]

    // disallow multicam in this context
    ar_multicam         [ 0 ]

    // progressive rendering
    ar_progressive      [ "$preview" ]
    
    // update time
    ar_render_interrupt [ "$renderinterrupt" ]
    
    // delay
    ar_preview_time     [ "$previewtime" ]
    
    // blur|sharp
    ar_preview_mode     [ "$previewmode" ]

    // render context is interactive
    ar_interactive      [ 1 ]

    // generate opid AOVs for dnd and picking of materials                            
    ar_generate_opid    [ 1 ]
}

// Specific renderer overrides
{
    override.inherit    Arnold
    override.name       Arnold/arnold4.0
}
